#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <sys/stat.h>


const char *text = "entrada.txt";

int main(int argc, char *argv[])
{
    char str;
    int line = 1; //a linha começa em 1
    
    FILE *in_file = fopen(text, "r");
    if (!in_file) 
    {
        perror("fopen");
        return 0;
    }

    struct stat sb;
    
    if (stat(text, &sb) == -1) 
    {
        perror("stat");
        return 0;
    }

    
    char *file_contents = malloc(sb.st_size);
    char *line_contents = malloc(sb.st_size);

     for (char c = getc(in_file); c != EOF; c = getc(in_file)){
         if (c == '\n'){
            line++;
         } 
    }
    fseek(in_file, 0, SEEK_SET);

    while (fscanf(in_file, "%[^-\n ] ", file_contents) != EOF) {

      printf("> %s\n", file_contents);
      }
    
    fclose(in_file);
    printf("\tNúmero total de linhas: %d\n",line);
    return 0;
}
